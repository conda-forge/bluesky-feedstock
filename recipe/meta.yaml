{% set name = "bluesky" %}
{% set version = "1.8.2" %}
{% set sha256 = "858bc9b46ba26bd2ba70282d043d3f665f1245b3cc97eb2431fe2fa8c57df005" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 1

test:
  imports:
    - bluesky
    - bluesky.plans
    - bluesky.callbacks

outputs:
- name: bluesky-base
  build:
    noarch: python
    script: {{ PYTHON }} -m pip install . --no-deps -vv
  requirements:
    host:
      - python >=3.6
      - pip
    run:
      - python >=3.6
      - cycler
      - event-model >=1.10.0
      - historydict
      - msgpack-numpy
      - msgpack-python
      - numpy
      - super_state_machine
      - toolz
      - tqdm >=4.44
      - zict
- name: bluesky
  build:
    noarch: python
  requirements:
    host:
      - python >=3.6
      - pip
    run:
      - databroker
      - doct
      - ipython
      - lmfit
      - matplotlib
      - ophyd
      - python >=3.6
      - pyzmq
      - {{ pin_subpackage('bluesky-base', max_pin="x.x.x") }}

about:
  home: https://blueskyproject.io
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: A Python data collection interface for experimental science

  description: A Python data collection interface for experimental science
  doc_url: https://blueskyproject.io/bluesky
  dev_url: https://github.com/bluesky/bluesky

extra:
  recipe-maintainers:
    - conda-forge/event-model
